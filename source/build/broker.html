<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>broker – 订单管理类 &mdash; PyAlgoTrade 0.17 文档</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 PyAlgoTrade 0.17 文档 中搜索"
          href="_static/opensearch.xml"/>
    <link rel="top" title="PyAlgoTrade 0.17 文档" href="index.html" />
    <link rel="up" title="代码的文档说明" href="code.html" />
    <link rel="next" title="strategy – 策略基类" href="strategy.html" />
    <link rel="prev" title="technical – 技术指标" href="technical.html" />
 

<!-- Google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1180709-11']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google analytics -->


  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="strategy.html" title="strategy – 策略基类"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="technical.html" title="technical – 技术指标"
             accesskey="P">上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyAlgoTrade 0.17 文档</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="code.html" accesskey="U">代码的文档说明</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">內容目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">broker &#8211; 订单管理类</a><ul>
<li><a class="reference internal" href="#module-pyalgotrade.broker">基类和模块</a></li>
<li><a class="reference internal" href="#module-pyalgotrade.broker.backtesting">回测模块和类</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="technical.html"
                        title="上一章">technical &#8211; 技术指标</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="strategy.html"
                        title="下一章">strategy &#8211; 策略基类</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/broker.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    输入相关的术语，模块，类或者函数名称进行搜索
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="broker">
<h1>broker &#8211; 订单管理类<a class="headerlink" href="#broker" title="永久链接至标题">¶</a></h1>
<div class="section" id="module-pyalgotrade.broker">
<span id="id1"></span><h2>基类和模块<a class="headerlink" href="#module-pyalgotrade.broker" title="永久链接至标题">¶</a></h2>
<dl class="class">
<dt id="pyalgotrade.broker.Order">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.</code><code class="descname">Order</code><span class="sig-paren">(</span><em>type_</em>, <em>action</em>, <em>instrument</em>, <em>quantity</em>, <em>instrumentTraits</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>订单基类.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>type</strong> (<code class="xref py py-class docutils literal"><span class="pre">Order.Type</span></code>) &#8211; 订单类型</li>
<li><strong>action</strong> (<code class="xref py py-class docutils literal"><span class="pre">Order.Action</span></code>) &#8211; 订单操作</li>
<li><strong>instrument</strong> (<em>string.</em>) &#8211; 品种标识</li>
<li><strong>quantity</strong> (<em>int/float.</em>) &#8211; 订单数量</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>这是一个基类，不应该直接被调用</p>
<p>有效 <strong>type</strong> 参数如下：</p>
<blockquote>
<div><ul class="simple">
<li>Order.Type.MARKET</li>
<li>Order.Type.LIMIT</li>
<li>Order.Type.STOP</li>
<li>Order.Type.STOP_LIMIT</li>
</ul>
</div></blockquote>
<p>有效 <strong>action</strong> 参数如下：</p>
<blockquote class="last">
<div><ul class="simple">
<li>Order.Action.BUY</li>
<li>Order.Action.BUY_TO_COVER</li>
<li>Order.Action.SELL</li>
<li>Order.Action.SELL_SHORT</li>
</ul>
</div></blockquote>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.Order.getId">
<code class="descname">getId</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getId" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单编号.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">如果没提交订单，则返回None</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getType">
<code class="descname">getType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getType" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单类型. 有效订单类型如下:</p>
<ul class="simple">
<li>Order.Type.MARKET</li>
<li>Order.Type.LIMIT</li>
<li>Order.Type.STOP</li>
<li>Order.Type.STOP_LIMIT</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getSubmitDateTime">
<code class="descname">getSubmitDateTime</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getSubmitDateTime" title="永久链接至目标">¶</a></dt>
<dd><p>当订单被提交时，返回下订单时的datetime</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getAction">
<code class="descname">getAction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getAction" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单操作. 有效返回订单操作如下:</p>
<ul class="simple">
<li>Order.Action.BUY</li>
<li>Order.Action.BUY_TO_COVER</li>
<li>Order.Action.SELL</li>
<li>Order.Action.SELL_SHORT</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getState">
<code class="descname">getState</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getState" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单状态. 有效订单状态如下:</p>
<ul class="simple">
<li>Order.State.INITIAL (the initial state).</li>
<li>Order.State.SUBMITTED</li>
<li>Order.State.ACCEPTED</li>
<li>Order.State.CANCELED</li>
<li>Order.State.PARTIALLY_FILLED</li>
<li>Order.State.FILLED</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.isActive">
<code class="descname">isActive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.isActive" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单活动是否活动</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.isInitial">
<code class="descname">isInitial</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.isInitial" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单状态是否为 Order.State.INITIAL.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.isSubmitted">
<code class="descname">isSubmitted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.isSubmitted" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单状态是否为 Order.State.SUBMITTED.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.isAccepted">
<code class="descname">isAccepted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.isAccepted" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单状态是否为 Order.State.ACCEPTED.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.isCanceled">
<code class="descname">isCanceled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.isCanceled" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单状态是否为 Order.State.CANCELED.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.isPartiallyFilled">
<code class="descname">isPartiallyFilled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.isPartiallyFilled" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单状态是否为 Order.State.PARTIALLY_FILLED.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.isFilled">
<code class="descname">isFilled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.isFilled" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单状态是否为 Order.State.FILLED.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getInstrument">
<code class="descname">getInstrument</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getInstrument" title="永久链接至目标">¶</a></dt>
<dd><p>返回品种标识</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getQuantity">
<code class="descname">getQuantity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getQuantity" title="永久链接至目标">¶</a></dt>
<dd><p>返回数量.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getFilled">
<code class="descname">getFilled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getFilled" title="永久链接至目标">¶</a></dt>
<dd><p>返回已经成交的股票数量</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getRemaining">
<code class="descname">getRemaining</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getRemaining" title="永久链接至目标">¶</a></dt>
<dd><p>返回未成交的股票数量</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getAvgFillPrice">
<code class="descname">getAvgFillPrice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getAvgFillPrice" title="永久链接至目标">¶</a></dt>
<dd><p>返回已成交的股票的均价，如果无已成交订单返回None</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getGoodTillCanceled">
<code class="descname">getGoodTillCanceled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getGoodTillCanceled" title="永久链接至目标">¶</a></dt>
<dd><p>Returns True if the order is good till canceled.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.setGoodTillCanceled">
<code class="descname">setGoodTillCanceled</code><span class="sig-paren">(</span><em>goodTillCanceled</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.setGoodTillCanceled" title="永久链接至目标">¶</a></dt>
<dd><p>Sets if the order should be good till canceled.
Orders that are not filled by the time the session closes will be will be automatically canceled
if they were not set as good till canceled</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>goodTillCanceled</strong> (<em>boolean.</em>) &#8211; True if the order should be good till canceled.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">一旦提交订单将不可变。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getAllOrNone">
<code class="descname">getAllOrNone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getAllOrNone" title="永久链接至目标">¶</a></dt>
<dd><p>如果订单全部成交或者撤销则返回真。</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.setAllOrNone">
<code class="descname">setAllOrNone</code><span class="sig-paren">(</span><em>allOrNone</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.setAllOrNone" title="永久链接至目标">¶</a></dt>
<dd><p>设置订单属性为ALL或者None。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>allOrNone</strong> (<em>boolean.</em>) &#8211; 布尔型 True：全部成交。</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">一旦提交订单将不可变。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Order.getExecutionInfo">
<code class="descname">getExecutionInfo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Order.getExecutionInfo" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单最后的执行信息。如果到目前为止一直未成交则返回None。
这在每时每刻都可能改变，或部分成交 或全部成交。（？？）</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><a class="reference internal" href="#pyalgotrade.broker.OrderExecutionInfo" title="pyalgotrade.broker.OrderExecutionInfo"><code class="xref py py-class docutils literal"><span class="pre">OrderExecutionInfo</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.MarketOrder">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.</code><code class="descname">MarketOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>quantity</em>, <em>onClose</em>, <em>instrumentTraits</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.MarketOrder" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Order</span></code></a></p>
<p>市价订单基类.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这是一个基类，不应该直接被调用</p>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.MarketOrder.getFillOnClose">
<code class="descname">getFillOnClose</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.MarketOrder.getFillOnClose" title="永久链接至目标">¶</a></dt>
<dd><p>如果订单尽可能的接近收盘价成交，返回True。 (Market-On-Close order).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.LimitOrder">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.</code><code class="descname">LimitOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>limitPrice</em>, <em>quantity</em>, <em>instrumentTraits</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.LimitOrder" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Order</span></code></a></p>
<p>限价订单基类</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这是一个基类，不应该直接被调用</p>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.LimitOrder.getLimitPrice">
<code class="descname">getLimitPrice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.LimitOrder.getLimitPrice" title="永久链接至目标">¶</a></dt>
<dd><p>返回限价.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.StopOrder">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.</code><code class="descname">StopOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>stopPrice</em>, <em>quantity</em>, <em>instrumentTraits</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.StopOrder" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Order</span></code></a></p>
<p>停损单基类.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这是一个基类，不应该直接被调用.</p>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.StopOrder.getStopPrice">
<code class="descname">getStopPrice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.StopOrder.getStopPrice" title="永久链接至目标">¶</a></dt>
<dd><p>返回停损价.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.StopLimitOrder">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.</code><code class="descname">StopLimitOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>stopPrice</em>, <em>limitPrice</em>, <em>quantity</em>, <em>instrumentTraits</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.StopLimitOrder" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Order</span></code></a></p>
<p>限价停损单基类.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这是一个基类，不应该直接被调用</p>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.StopLimitOrder.getStopPrice">
<code class="descname">getStopPrice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.StopLimitOrder.getStopPrice" title="永久链接至目标">¶</a></dt>
<dd><p>返回停损价.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.StopLimitOrder.getLimitPrice">
<code class="descname">getLimitPrice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.StopLimitOrder.getLimitPrice" title="永久链接至目标">¶</a></dt>
<dd><p>返回限价.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.OrderExecutionInfo">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.</code><code class="descname">OrderExecutionInfo</code><span class="sig-paren">(</span><em>price</em>, <em>quantity</em>, <em>commission</em>, <em>dateTime</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.OrderExecutionInfo" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>一个订单的执行信息</p>
<dl class="method">
<dt id="pyalgotrade.broker.OrderExecutionInfo.getPrice">
<code class="descname">getPrice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.OrderExecutionInfo.getPrice" title="永久链接至目标">¶</a></dt>
<dd><p>Returns the fill price.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.OrderExecutionInfo.getQuantity">
<code class="descname">getQuantity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.OrderExecutionInfo.getQuantity" title="永久链接至目标">¶</a></dt>
<dd><p>返回数量</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.OrderExecutionInfo.getCommission">
<code class="descname">getCommission</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.OrderExecutionInfo.getCommission" title="永久链接至目标">¶</a></dt>
<dd><p>返回应用的手续费</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.OrderExecutionInfo.getDateTime">
<code class="descname">getDateTime</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.OrderExecutionInfo.getDateTime" title="永久链接至目标">¶</a></dt>
<dd><p>返回订单被执行时的 <code class="xref py py-class docutils literal"><span class="pre">datatime.datetime</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.Broker">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.</code><code class="descname">Broker</code><a class="headerlink" href="#pyalgotrade.broker.Broker" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.observer.Subject</span></code></p>
<p>经纪商基类.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这是一个基类，不应该直接被调用</p>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.Broker.getCash">
<code class="descname">getCash</code><span class="sig-paren">(</span><em>includeShort=True</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.getCash" title="永久链接至目标">¶</a></dt>
<dd><p>返回可用的现金。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>includeShort</strong> (<em>boolean.</em>) &#8211; 是否包含空头仓位的现金（译者注：国际特有）</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.getShares">
<code class="descname">getShares</code><span class="sig-paren">(</span><em>instrument</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.getShares" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个品种的股数</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.getPositions">
<code class="descname">getPositions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.getPositions" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个品种和股数相对应的字典</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.getActiveOrders">
<code class="descname">getActiveOrders</code><span class="sig-paren">(</span><em>instrument=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.getActiveOrders" title="永久链接至目标">¶</a></dt>
<dd><p>返回仍然活动的连续订单。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>instrument</strong> (<em>string.</em>) &#8211; 品种标识。可选参数。若非空，则只返回给定品种的活动订单</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.submitOrder">
<code class="descname">submitOrder</code><span class="sig-paren">(</span><em>order</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.submitOrder" title="永久链接至目标">¶</a></dt>
<dd><p>提交订单</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code></a>.) &#8211; 需要提交的订单</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>提交后订单状态变为SUBMITTED状态，事件并不能引发这种转换。（？？？）</li>
<li>相同的订单提交2次将会引发一个异常。</li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.createMarketOrder">
<code class="descname">createMarketOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>quantity</em>, <em>onClose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.createMarketOrder" title="永久链接至目标">¶</a></dt>
<dd><p>创建市价单.
市价订单是按市场当时最优价或市价立即购买或出售一定数量股票合约的指令。一般来说，这种类型的订单将立即执行。然而市价单的成交价往往不能确定。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> (<em>Order.Action.BUY, or Order.Action.BUY_TO_COVER, or Order.Action.SELL or Order.Action.SELL_SHORT.</em>) &#8211; 订单操作.</li>
<li><strong>instrument</strong> (<em>string.</em>) &#8211; 品种标识.</li>
<li><strong>quantity</strong> (<em>int/float.</em>) &#8211; 订单数量.</li>
<li><strong>onClose</strong> (<em>boolean.</em>) &#8211; 默认为假。若需要尽可能的贴近收盘价成交(Market-On-Close order)则应为True.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">一个 <a class="reference internal" href="#pyalgotrade.broker.MarketOrder" title="pyalgotrade.broker.MarketOrder"><code class="xref py py-class docutils literal"><span class="pre">MarketOrder</span></code></a> 子类.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.createLimitOrder">
<code class="descname">createLimitOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>limitPrice</em>, <em>quantity</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.createLimitOrder" title="永久链接至目标">¶</a></dt>
<dd><dl class="docutils">
<dt>创建限价单.</dt>
<dd>限价单是一种以明确的或更优的价格来购买或出售股票的订单。
一张限价买单只能以限价或更低的价格执行，一张限价卖单只能以限价或更高的价格执行。</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> (<em>Order.Action.BUY, or Order.Action.BUY_TO_COVER, or Order.Action.SELL or Order.Action.SELL_SHORT.</em>) &#8211; 订单操作.</li>
<li><strong>instrument</strong> (<em>string.</em>) &#8211; 品种标识.</li>
<li><strong>limitPrice</strong> (<em>float</em>) &#8211; The order price.</li>
<li><strong>quantity</strong> (<em>int/float.</em>) &#8211; 订单数量.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">一个 <a class="reference internal" href="#pyalgotrade.broker.LimitOrder" title="pyalgotrade.broker.LimitOrder"><code class="xref py py-class docutils literal"><span class="pre">LimitOrder</span></code></a> 子类.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.createStopOrder">
<code class="descname">createStopOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>stopPrice</em>, <em>quantity</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.createStopOrder" title="永久链接至目标">¶</a></dt>
<dd><p>创建停损单.
停损单, 也被称为止损单。停损单只有当价格到达某一设定水准时才可执行的买单或卖单。这种买/卖单的目的通常是为了要降低某一现有头寸的损失。一旦触及停损的价位，便会依照下一个市价执行（尤其是在动荡的市场上更是如此）。
当价格达到停损价时，停损单成为市价单。
A buy stop order is entered at a stop price above the current market price. Investors generally use a buy stop order
to limit a loss or to protect a profit on a stock that they have sold short.
A sell stop order is entered at a stop price below the current market price. Investors generally use a sell stop order
to limit a loss or to protect a profit on a stock that they own.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> (<em>Order.Action.BUY, or Order.Action.BUY_TO_COVER, or Order.Action.SELL or Order.Action.SELL_SHORT.</em>) &#8211; 订单操作.</li>
<li><strong>instrument</strong> (<em>string.</em>) &#8211; 品种标识.</li>
<li><strong>stopPrice</strong> (<em>float</em>) &#8211; 触发价格</li>
<li><strong>quantity</strong> (<em>int/float.</em>) &#8211; 订单数量.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">一个 <a class="reference internal" href="#pyalgotrade.broker.StopOrder" title="pyalgotrade.broker.StopOrder"><code class="xref py py-class docutils literal"><span class="pre">StopOrder</span></code></a> 子类.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.createStopLimitOrder">
<code class="descname">createStopLimitOrder</code><span class="sig-paren">(</span><em>action</em>, <em>instrument</em>, <em>stopPrice</em>, <em>limitPrice</em>, <em>quantity</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.createStopLimitOrder" title="永久链接至目标">¶</a></dt>
<dd><p>Creates a Stop-Limit order.
A stop-limit order is an order to buy or sell a stock that combines the features of a stop order and a limit order.
Once the stop price is reached, a stop-limit order becomes a limit order that will be executed at a specified price
(or better). The benefit of a stop-limit order is that the investor can control the price at which the order can be executed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> (<em>Order.Action.BUY, or Order.Action.BUY_TO_COVER, or Order.Action.SELL or Order.Action.SELL_SHORT.</em>) &#8211; 订单操作.</li>
<li><strong>instrument</strong> (<em>string.</em>) &#8211; 品种标识.</li>
<li><strong>stopPrice</strong> (<em>float</em>) &#8211; The trigger price.</li>
<li><strong>limitPrice</strong> (<em>float</em>) &#8211; 限价</li>
<li><strong>quantity</strong> (<em>int/float.</em>) &#8211; 订单数量.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">一个 <a class="reference internal" href="#pyalgotrade.broker.StopLimitOrder" title="pyalgotrade.broker.StopLimitOrder"><code class="xref py py-class docutils literal"><span class="pre">StopLimitOrder</span></code></a> 子类.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.Broker.cancelOrder">
<code class="descname">cancelOrder</code><span class="sig-paren">(</span><em>order</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.Broker.cancelOrder" title="永久链接至目标">¶</a></dt>
<dd><p>请求撤销一个订单。如果订单已成交将引发一个异常</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code></a>.) &#8211; 需要撤销的订单</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyalgotrade.broker.backtesting">
<span id="id2"></span><h2>回测模块和类<a class="headerlink" href="#module-pyalgotrade.broker.backtesting" title="永久链接至标题">¶</a></h2>
<dl class="class">
<dt id="pyalgotrade.broker.backtesting.Commission">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.backtesting.</code><code class="descname">Commission</code><a class="headerlink" href="#pyalgotrade.broker.backtesting.Commission" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Base class for implementing different commission schemes.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这是一个基类，不应该直接被调用</p>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.backtesting.Commission.calculate">
<code class="descname">calculate</code><span class="sig-paren">(</span><em>order</em>, <em>price</em>, <em>quantity</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.Commission.calculate" title="永久链接至目标">¶</a></dt>
<dd><p>Calculates the commission for an order execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Order</span></code></a>.) &#8211; 被执行的订单.</li>
<li><strong>price</strong> (<em>float.</em>) &#8211; 每股价格.</li>
<li><strong>quantity</strong> (<em>float.</em>) &#8211; 订单数量</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">float.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.backtesting.NoCommission">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.backtesting.</code><code class="descname">NoCommission</code><a class="headerlink" href="#pyalgotrade.broker.backtesting.NoCommission" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.backtesting.Commission</span></code></a></p>
<p>一个永远返回0的 <a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">Commission</span></code></a> 类.</p>
</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.backtesting.FixedPerTrade">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.backtesting.</code><code class="descname">FixedPerTrade</code><span class="sig-paren">(</span><em>amount</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.FixedPerTrade" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.backtesting.Commission</span></code></a></p>
<p>对整个交易收取固定费用的 <a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">Commission</span></code></a> 类</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>amount</strong> (<em>float.</em>) &#8211; 一张订单的费用</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.backtesting.TradePercentage">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.backtesting.</code><code class="descname">TradePercentage</code><span class="sig-paren">(</span><em>percentage</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.TradePercentage" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.backtesting.Commission</span></code></a></p>
<p>对整个交易按成交金额比例收费的 <a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">Commission</span></code></a> 类</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>percentage</strong> (<em>float.</em>) &#8211; 收费比例. 0.01 意味着 1%, 这个比例必须小于1.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.backtesting.Broker">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.backtesting.</code><code class="descname">Broker</code><span class="sig-paren">(</span><em>cash</em>, <em>barFeed</em>, <em>commission=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.Broker" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.Broker" title="pyalgotrade.broker.Broker"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Broker</span></code></a></p>
<p>回测的经纪商.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>cash</strong> (<em>int/float.</em>) &#8211; 初始的现金</li>
<li><strong>barFeed</strong> (<code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.barfeed.BarFeed</span></code>) &#8211; 提供bar的bar数据源。</li>
<li><strong>commission</strong> (<a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">Commission</span></code></a>) &#8211; 一个负责计算订单佣金的对象</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pyalgotrade.broker.backtesting.Broker.getCommission">
<code class="descname">getCommission</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.Broker.getCommission" title="永久链接至目标">¶</a></dt>
<dd><p>返回用于计算订单佣金的策略</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">Commission</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.backtesting.Broker.getEquity">
<code class="descname">getEquity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.Broker.getEquity" title="永久链接至目标">¶</a></dt>
<dd><p>返回绩效组合。（现金+股票）Returns the portfolio value (cash + shares).</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.backtesting.Broker.getFillStrategy">
<code class="descname">getFillStrategy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.Broker.getFillStrategy" title="永久链接至目标">¶</a></dt>
<dd><p>返回当前的 <a class="reference internal" href="#pyalgotrade.broker.fillstrategy.FillStrategy" title="pyalgotrade.broker.fillstrategy.FillStrategy"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.fillstrategy.FillStrategy</span></code></a> 设置.</p>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.backtesting.Broker.setCommission">
<code class="descname">setCommission</code><span class="sig-paren">(</span><em>commission</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.Broker.setCommission" title="永久链接至目标">¶</a></dt>
<dd><p>设置用于计算订单佣金的策略。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>commission</strong> (<a class="reference internal" href="#pyalgotrade.broker.backtesting.Commission" title="pyalgotrade.broker.backtesting.Commission"><code class="xref py py-class docutils literal"><span class="pre">Commission</span></code></a>.) &#8211; 一个负责计算订单佣金的对象</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.backtesting.Broker.setFillStrategy">
<code class="descname">setFillStrategy</code><span class="sig-paren">(</span><em>strategy</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.backtesting.Broker.setFillStrategy" title="永久链接至目标">¶</a></dt>
<dd><p>Sets the <a class="reference internal" href="#pyalgotrade.broker.fillstrategy.FillStrategy" title="pyalgotrade.broker.fillstrategy.FillStrategy"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.fillstrategy.FillStrategy</span></code></a> to use.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-pyalgotrade.broker.slippage"></span><dl class="class">
<dt id="pyalgotrade.broker.slippage.SlippageModel">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.slippage.</code><code class="descname">SlippageModel</code><a class="headerlink" href="#pyalgotrade.broker.slippage.SlippageModel" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>交易滑点模型的基类</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这是一个基类，不应该直接被调用</p>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.slippage.SlippageModel.calculatePrice">
<code class="descname">calculatePrice</code><span class="sig-paren">(</span><em>order</em>, <em>price</em>, <em>quantity</em>, <em>bar</em>, <em>volumeUsed</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.slippage.SlippageModel.calculatePrice" title="永久链接至目标">¶</a></dt>
<dd><p>返回一张订单的滑价</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Order</span></code></a>.) &#8211; 将要成交的订单</li>
<li><strong>price</strong> (<em>float.</em>) &#8211; 计算滑价前的每股价格</li>
<li><strong>quantity</strong> (<em>float.</em>) &#8211; 此时此刻这张订单的成交股数。</li>
<li><strong>bar</strong> (<a class="reference internal" href="bar.html#pyalgotrade.bar.Bar" title="pyalgotrade.bar.Bar"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.bar.Bar</span></code></a>.) &#8211; 当前bar.</li>
<li><strong>volumeUsed</strong> (<em>float.</em>) &#8211; The volume size that was taken so far from the current bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">float.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.slippage.NoSlippage">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.slippage.</code><code class="descname">NoSlippage</code><a class="headerlink" href="#pyalgotrade.broker.slippage.NoSlippage" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.slippage.SlippageModel" title="pyalgotrade.broker.slippage.SlippageModel"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.slippage.SlippageModel</span></code></a></p>
<p>一个不计滑点模型.</p>
</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.slippage.VolumeShareSlippage">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.slippage.</code><code class="descname">VolumeShareSlippage</code><span class="sig-paren">(</span><em>priceImpact=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.slippage.VolumeShareSlippage" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.slippage.SlippageModel" title="pyalgotrade.broker.slippage.SlippageModel"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.slippage.SlippageModel</span></code></a></p>
<p>A volume share slippage model as defined in Zipline&#8217;s VolumeShareSlippage model.
The slippage is calculated by multiplying the price impact constant by the square of the ratio of the order
to the total volume.</p>
<p>Check <a class="reference external" href="https://www.quantopian.com/help#ide-slippage">https://www.quantopian.com/help#ide-slippage</a> for more details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>priceImpact</strong> (<em>float.</em>) &#8211; Defines how large of an impact your order will have on the backtester&#8217;s price calculation.</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-pyalgotrade.broker.fillstrategy"></span><dl class="class">
<dt id="pyalgotrade.broker.fillstrategy.FillStrategy">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.fillstrategy.</code><code class="descname">FillStrategy</code><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.FillStrategy" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Base class for order filling strategies for the backtester.</p>
<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.FillStrategy.fillLimitOrder">
<code class="descname">fillLimitOrder</code><span class="sig-paren">(</span><em>broker_</em>, <em>order</em>, <em>bar</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.FillStrategy.fillLimitOrder" title="永久链接至目标">¶</a></dt>
<dd><p>Override to return the fill price and quantity for a limit order or None if the order can&#8217;t be filled
at the given time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>broker</strong> (<code class="xref py py-class docutils literal"><span class="pre">Broker</span></code>) &#8211; The broker.</li>
<li><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.LimitOrder" title="pyalgotrade.broker.LimitOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.LimitOrder</span></code></a>) &#8211; The order.</li>
<li><strong>bar</strong> (<a class="reference internal" href="bar.html#pyalgotrade.bar.Bar" title="pyalgotrade.bar.Bar"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.bar.Bar</span></code></a>) &#8211; The current bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">A <code class="xref py py-class docutils literal"><span class="pre">FillInfo</span></code> or None if the order should not be filled.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.FillStrategy.fillMarketOrder">
<code class="descname">fillMarketOrder</code><span class="sig-paren">(</span><em>broker_</em>, <em>order</em>, <em>bar</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.FillStrategy.fillMarketOrder" title="永久链接至目标">¶</a></dt>
<dd><p>Override to return the fill price and quantity for a market order or None if the order can&#8217;t be filled
at the given time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>broker</strong> (<code class="xref py py-class docutils literal"><span class="pre">Broker</span></code>) &#8211; The broker.</li>
<li><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.MarketOrder" title="pyalgotrade.broker.MarketOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.MarketOrder</span></code></a>) &#8211; The order.</li>
<li><strong>bar</strong> (<a class="reference internal" href="bar.html#pyalgotrade.bar.Bar" title="pyalgotrade.bar.Bar"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.bar.Bar</span></code></a>) &#8211; The current bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">A <code class="xref py py-class docutils literal"><span class="pre">FillInfo</span></code> or None if the order should not be filled.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.FillStrategy.fillStopLimitOrder">
<code class="descname">fillStopLimitOrder</code><span class="sig-paren">(</span><em>broker_</em>, <em>order</em>, <em>bar</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.FillStrategy.fillStopLimitOrder" title="永久链接至目标">¶</a></dt>
<dd><p>Override to return the fill price and quantity for a stop limit order or None if the order can&#8217;t be filled
at the given time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>broker</strong> (<code class="xref py py-class docutils literal"><span class="pre">Broker</span></code>) &#8211; The broker.</li>
<li><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.StopLimitOrder" title="pyalgotrade.broker.StopLimitOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.StopLimitOrder</span></code></a>) &#8211; The order.</li>
<li><strong>bar</strong> (<a class="reference internal" href="bar.html#pyalgotrade.bar.Bar" title="pyalgotrade.bar.Bar"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.bar.Bar</span></code></a>) &#8211; The current bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">A <code class="xref py py-class docutils literal"><span class="pre">FillInfo</span></code> or None if the order should not be filled.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.FillStrategy.fillStopOrder">
<code class="descname">fillStopOrder</code><span class="sig-paren">(</span><em>broker_</em>, <em>order</em>, <em>bar</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.FillStrategy.fillStopOrder" title="永久链接至目标">¶</a></dt>
<dd><p>Override to return the fill price and quantity for a stop order or None if the order can&#8217;t be filled
at the given time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>broker</strong> (<code class="xref py py-class docutils literal"><span class="pre">Broker</span></code>) &#8211; The broker.</li>
<li><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.StopOrder" title="pyalgotrade.broker.StopOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.StopOrder</span></code></a>) &#8211; The order.</li>
<li><strong>bar</strong> (<a class="reference internal" href="bar.html#pyalgotrade.bar.Bar" title="pyalgotrade.bar.Bar"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.bar.Bar</span></code></a>) &#8211; The current bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last">A <code class="xref py py-class docutils literal"><span class="pre">FillInfo</span></code> or None if the order should not be filled.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.FillStrategy.onBars">
<code class="descname">onBars</code><span class="sig-paren">(</span><em>broker_</em>, <em>bars</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.FillStrategy.onBars" title="永久链接至目标">¶</a></dt>
<dd><p>Override (optional) to get notified when the broker is about to process new bars.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>broker</strong> (<code class="xref py py-class docutils literal"><span class="pre">Broker</span></code>) &#8211; The broker.</li>
<li><strong>bars</strong> (<a class="reference internal" href="bar.html#pyalgotrade.bar.Bars" title="pyalgotrade.bar.Bars"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.bar.Bars</span></code></a>) &#8211; The current bars.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.FillStrategy.onOrderFilled">
<code class="descname">onOrderFilled</code><span class="sig-paren">(</span><em>broker_</em>, <em>order</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.FillStrategy.onOrderFilled" title="永久链接至目标">¶</a></dt>
<dd><p>Override (optional) to get notified when an order was filled, or partially filled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>broker</strong> (<code class="xref py py-class docutils literal"><span class="pre">Broker</span></code>) &#8211; The broker.</li>
<li><strong>order</strong> (<a class="reference internal" href="#pyalgotrade.broker.Order" title="pyalgotrade.broker.Order"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.Order</span></code></a>) &#8211; The order filled.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyalgotrade.broker.fillstrategy.DefaultStrategy">
<em class="property">class </em><code class="descclassname">pyalgotrade.broker.fillstrategy.</code><code class="descname">DefaultStrategy</code><span class="sig-paren">(</span><em>volumeLimit=0.25</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.DefaultStrategy" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference internal" href="#pyalgotrade.broker.fillstrategy.FillStrategy" title="pyalgotrade.broker.fillstrategy.FillStrategy"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.fillstrategy.FillStrategy</span></code></a></p>
<p>Default fill strategy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>volumeLimit</strong> (<em>float</em>) &#8211; The proportion of the volume that orders can take up in a bar. Must be &gt; 0 and &lt;= 1.</td>
</tr>
</tbody>
</table>
<p>This strategy works as follows:</p>
<ul>
<li><p class="first">A <a class="reference internal" href="#pyalgotrade.broker.MarketOrder" title="pyalgotrade.broker.MarketOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.MarketOrder</span></code></a> is always filled using the open/close price.</p>
</li>
<li><dl class="first docutils">
<dt>A <a class="reference internal" href="#pyalgotrade.broker.LimitOrder" title="pyalgotrade.broker.LimitOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.LimitOrder</span></code></a> will be filled like this:</dt>
<dd><ul class="first last simple">
<li>If the limit price was penetrated with the open price, then the open price is used.</li>
<li>If the bar includes the limit price, then the limit price is used.</li>
<li>Note that when buying the price is penetrated if it gets &lt;= the limit price, and when selling the price
is penetrated if it gets &gt;= the limit price</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>A <a class="reference internal" href="#pyalgotrade.broker.StopOrder" title="pyalgotrade.broker.StopOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.StopOrder</span></code></a> will be filled like this:</dt>
<dd><ul class="first last simple">
<li>If the stop price was penetrated with the open price, then the open price is used.</li>
<li>If the bar includes the stop price, then the stop price is used.</li>
<li>Note that when buying the price is penetrated if it gets &gt;= the stop price, and when selling the price
is penetrated if it gets &lt;= the stop price</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>A <a class="reference internal" href="#pyalgotrade.broker.StopLimitOrder" title="pyalgotrade.broker.StopLimitOrder"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.StopLimitOrder</span></code></a> will be filled like this:</dt>
<dd><ul class="first last">
<li><p class="first">If the stop price was penetrated with the open price, or if the bar includes the stop price, then the limit
order becomes active.</p>
</li>
<li><dl class="first docutils">
<dt>If the limit order is active:</dt>
<dd><ul class="first last simple">
<li>If the limit order was activated in this same bar and the limit price is penetrated as well, then the
best between the stop price and the limit fill price (as described earlier) is used.</li>
<li>If the limit order was activated at a previous bar then the limit fill price (as described earlier)
is used.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>This is the default strategy used by the Broker.</li>
<li>It uses <a class="reference internal" href="#pyalgotrade.broker.slippage.NoSlippage" title="pyalgotrade.broker.slippage.NoSlippage"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.slippage.NoSlippage</span></code></a> slippage model by default.</li>
<li>If volumeLimit is 0.25, and a certain bar&#8217;s volume is 100, then no more than 25 shares can be used by all
orders that get processed at that bar.</li>
<li>If using trade bars, then all the volume from that bar can be used.</li>
</ul>
</div>
<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.DefaultStrategy.setSlippageModel">
<code class="descname">setSlippageModel</code><span class="sig-paren">(</span><em>slippageModel</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.DefaultStrategy.setSlippageModel" title="永久链接至目标">¶</a></dt>
<dd><p>Set the slippage model to use.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>slippageModel</strong> (<a class="reference internal" href="#pyalgotrade.broker.slippage.SlippageModel" title="pyalgotrade.broker.slippage.SlippageModel"><code class="xref py py-class docutils literal"><span class="pre">pyalgotrade.broker.slippage.SlippageModel</span></code></a>) &#8211; The slippage model.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyalgotrade.broker.fillstrategy.DefaultStrategy.setVolumeLimit">
<code class="descname">setVolumeLimit</code><span class="sig-paren">(</span><em>volumeLimit</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalgotrade.broker.fillstrategy.DefaultStrategy.setVolumeLimit" title="永久链接至目标">¶</a></dt>
<dd><p>Set the volume limit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>volumeLimit</strong> (<em>float</em>) &#8211; The proportion of the volume that orders can take up in a bar. Must be &gt; 0 and &lt;= 1.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="strategy.html" title="strategy – 策略基类"
             >下一页</a> |</li>
        <li class="right" >
          <a href="technical.html" title="technical – 技术指标"
             >上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyAlgoTrade 0.17 文档</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="code.html" >代码的文档说明</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; 版权所有 2014-2015, 李增海翻译 QQ860007600.
    </div>
  </body>
</html>